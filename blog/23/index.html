
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Artsy Engineering</title>
  <meta name="author" content="">

  
  <meta name="description" content="
  
  
    
      
        

  
    
      
        
          
        
        
          Rendering on the Server and Client in Node.js
        
...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:image" content="http://artsy.github.io/images/artsy_oss_image.png" />
  <meta property="og:image:type" content="image/png" />

  
  <link rel="canonical" href="https://artsy.github.io/blog/23/">
  <link rel="alternate" type="application/rss+xml" title="Artsy Engineering Blog" href="/feed">
  <link rel="alternate" type="application/atom+xml" title="Podcast Feed" href="/podcast.xml" />

  <link href="/favicon.ico" rel="icon">
  <link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  <script src="/javascripts/jquery-1.11.3.min.js"> </script>
  <script src="/javascripts/gradient-fade.js"></script>
  <script src="/javascripts/noframework.waypoints.min.js"></script>
  <script src="/javascripts/sticky.min.js"></script>
  <script src="/javascripts/search.min.js"></script>
  <script src="/javascripts/custom-element.min.js"></script>
  <script src="/javascripts/g-emoji-element.js"></script>

  

  <script type="text/javascript" src="https://fast.fonts.net/jsapi/f7f47a40-b25b-44ee-9f9c-cfdfc8bb2741.js"></script>


  <link href="/feed.xml" rel="alternate" title="Artsy Engineering" type="application/atom+xml">
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12450662-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <!--[if IE 8]><link href="/stylesheets/custom/ie_font.css" type="text/css"><![endif]-->

</head>


<body>
  <div id="logo-container">
    <a id="lrg-mark" href="https://www.artsy.net/">
      <svg viewBox="0 0 510 510" width="40" height="40" xmlns="http://www.w3.org/2000/svg">
        <path transform="scale(1, -1) translate(0, -480)" d="M0 -32h512v512h-512v-512v0zM464 16h-80v80h-48v-80h-288v416h416v-416v0zM194 384h-40l-74 -186h38l20 52h72l19 -52h39l-74 186v0zM149 282l25 66l24 -66h-49v0z"/>
      </svg>
    </a>
  </div>
  <header id="banner"><div id="header">
  <div class="header-navigation">
    <ul>
      <li><a href="https://developers.artsy.net/">API</a></li>
      <li><a href="https://www.artsy.net/jobs">Careers</a></li>
      <li><a href="http://twitter.com/artsyopensource">@artsyopensource</a></li>
      <li><a href="http://www.artsy.net/">Artsy.net</a></li>
    </ul>
    <span class="header-section-title">
      
        <a href="/open-source">Open Source</a>
      
    </span>
  </div>

  <div class="header-sticky-container">
    <div class="header-logo">
      <h2><a href="https://artsy.github.io">Artsy</a></h2>
    </div>
    <div class="header-search">
      
        <h2><a href="/">Engineering Blog</a></h2>
        <span>
  <form action="/search" method="get">
    <input class="search" id="search-query" type="text" name="q" results="0" placeholder="Search"/>
  </form>

</span>
      
    </div>
  </div>
</div>
</header>
  <div class="header-hamburger">
    <button class="cmn-toggle-switch cmn-toggle-switch__htx">
      <span>toggle menu</span>
    </button>
  </div>
  <div id="main">
    <div id="content">

      <div class="blog-index">
  
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/11/30/rendering-on-the-server-and-client-in-node-dot-js/">
        
        
          <h2 class="entry-title">Rendering on the Server and Client in Node.js</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/craig">Craig Spaeth<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/craigspaeth">@craigspaeth</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p><img src="/images/2013-12-18-rendering-on-the-server-and-client-in-node-dot-js/isomorphic.png" alt="Diagram of Shared Server/Client Architecture" /></p>

<p>At Artsy we’ve been building <a href="http://nodejs.org/">Node.js</a> applications that share code and rendering between the server and browser. We’ve seen many benefits from this – pages load faster, we can optimize SEO, developers are more productive, and JavaScript coding is just an overall better experience.</p>

<p>Today we’re happy to announce <a href="http://ezeljs.com/">Ezel</a>, our open source boilerplate we use to bootstrap our Node projects and the <a href="https://github.com/artsy/benv">various</a> <a href="https://github.com/artsy/backbone-super-sync">node</a> <a href="https://github.com/artsy/sharify">modules</a> that built up to it.</p>

<p>In his article, <a href="http://nerds.airbnb.com/isomorphic-JavaScript-future-web-apps/"><em>Isomorphic JavaScript: The Future of Web Apps</em></a>, Spike Brehm from AirBnB describes this growing trend well and we’re excited to be a part of it. In this article I’ll tell Artsy’s story of moving from a single monolithic application to modular <a href="http://backbonejs.org/">Backbone</a> apps that run in Node and the browser and consume our external API.</p>


        <p><a href="/blog/2013/11/30/rendering-on-the-server-and-client-in-node-dot-js/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/11/07/upgrading-to-mongoid4/">
        
        
          <h2 class="entry-title">Upgrading to Mongoid 4.x</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/db">Daniel Doubrovkine<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/dblockdotorg">@dblockdotorg</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p>I recently went through an exercise of upgrading one of Artsy’s largest web projects to the current HEAD of Mongoid 4.x. This is going to be a major release with numerous changes and I wanted to flush out bugs before the final version of the ODM is released. All Mongoid changes currently live on <a href="https://github.com/mongoid/mongoid">master</a>.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">gem</span> <span class="s1">'mongoid'</span><span class="p">,</span> <span class="ss">github: </span><span class="s1">'mongoid/mongoid'</span>
</code></pre></div></div>

<p>In the process I’ve worked on making a few gems compatible with Mongoid 4 and learned a couple of things that should help you make this process smooth for your own applications.</p>


        <p><a href="/blog/2013/11/07/upgrading-to-mongoid4/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/08/27/introduction-to-aws-opsworks/">
        
        
          <h2 class="entry-title">Introduction to AWS OpsWorks</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/joey">Joey Aghion<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/joeyAghion">@joeyAghion</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p>OpsWorks is a new service from Amazon that promises to provide high-level tools to manage your EC2-based deployment. From <a href="http://aws.typepad.com/aws/2013/02/aws-opsworks-flexible-application-management-in-the-cloud.html">the announcement</a>:</p>

<blockquote>
  <p>AWS OpsWorks features an integrated management experience for the entire application lifecycle including resource provisioning, configuration management, application deployment, monitoring, and access control. It will work with applications of any level of complexity and is independent of any particular architectural pattern.</p>
</blockquote>

<p>After scratching our heads about exactly what that meant, we tried it anyway. If you’ve been straining at the limits of your Platform as a Service (PaaS) provider, or just wishing for more automation for your EC2 deployment, you may want to try it out too.</p>

<p>Artsy has been experimenting with OpsWorks for a few months now and recently adopted it for the production <a href="http://artsy.net">artsy.net</a> site. We’re excited to share what we’ve learned in the process.</p>

<p><a href="/images/2013-08-27-introduction-to-aws-opsworks/opsworks.png">
  <img src="/images/2013-08-27-introduction-to-aws-opsworks/opsworks.png" alt="OpsWorks overview" style="" />
</a></p>


        <p><a href="/blog/2013/08/27/introduction-to-aws-opsworks/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/06/23/normalizing-gmail-email-addresses-with-canonical-emails/">
        
        
          <h2 class="entry-title">Normalizing GMail E-Mail Addresses with CanonicalEmails</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/db">Daniel Doubrovkine<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/dblockdotorg">@dblockdotorg</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p>A whopping 49% of Artsy users have “gmail.com” email addresses. The next domain name, “hotmail.com”, doesn’t even come close, with only 6%.</p>

<p><img src="/images/2013-06-23-normalizing-gmail-email-addresses-with-canonical-emails/artsy-email-domains.png" /></p>

<p>GMail addresses ignore periods and are case-insensitive. For example, “Donald.Duck@gmail.com” and “donaldduck@gmail.com” are the same account. You can log-in to GMail with both. Users often register with the former and try to log-in to Artsy with the latter. With so many GMail users, expect a dozen support emails per day.</p>

<p>The solution is to normalize these emails into a canonical form.</p>


        <p><a href="/blog/2013/06/23/normalizing-gmail-email-addresses-with-canonical-emails/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/06/21/adding-api-documentation-with-grape-swagger/">
        
        
          <h2 class="entry-title">Adding API Docs with Grape and Swagger</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/db">Daniel Doubrovkine<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/dblockdotorg">@dblockdotorg</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p>The Artsy website, Partner CMS, mobile tools, and all our hackathon experiments are built on top of a core API. We’ve put a lot of effort into documenting it internally. But developers don’t want to have to grok through code. With <a href="https://github.com/intridea/grape">Grape</a> and <a href="https://developers.helloreverb.com/swagger">Swagger</a>, adding an API explorer and exposing the API documentation has never been easier.</p>

<p><img src="/images/2013-06-21-adding-api-documentation-with-grape-swagger/swagger-ui.png" /></p>


        <p><a href="/blog/2013/06/21/adding-api-documentation-with-grape-swagger/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/06/14/writing-headless-backbone-tests-with-node-dot-js/">
        
        
          <h2 class="entry-title">Writing Headless Backbone Tests With Node.js</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/craig">Craig Spaeth<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/craigspaeth">@craigspaeth</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <h2 id="tldr">TL;DR</h2>

<p>Write fast, headless, tests for Backbone using Node.js. See this project as an example  <a href="https://github.com/craigspaeth/backbone-headless-testing">https://github.com/craigspaeth/backbone-headless-testing</a>.</p>

<h2 id="a-brief-history">A Brief History</h2>

<p>Artsy is mostly a thick client <a href="http://backbonejs.org/">Backbone</a> app that sits on <a href="http://rubyonrails.org/">Rails</a> and largely depends on <a href="http://jnicklas.github.io/capybara/">Capybara</a> (<a href="http://docs.seleniumhq.org/">Selenium</a> backed bot that clicks around Firefox) for testing it’s javascript. This leads to some seriously brittle and slow integration tests. <a href="http://artsy.github.io/blog/2012/02/03/reliably-testing-asynchronous-ui-w-slash-rspec-and-capybara/">Despite being able to wrangle Capybara</a> to do most of our client-side testing, we knew there must be a better way.</p>

<p>When building a CMS app for our gallery partners to manage their Artsy inventory, we built a new Backbone app on top of <a href="http://nodejs.org/">node.js</a>. The result was a headless test suite that runs around 60 times faster.</p>

<p>Let’s take a look at how it’s done.</p>


        <p><a href="/blog/2013/06/14/writing-headless-backbone-tests-with-node-dot-js/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/04/13/bootstrapping-json-data-with-rails-and-backbone-js/">
        
        
          <h2 class="entry-title">Bootstrapping JSON Data with Rails and Backbone.js</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/db">Daniel Doubrovkine<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/dblockdotorg">@dblockdotorg</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p>The <a href="http://artsy.net">artsy.net website</a> is a Backbone.js application that talks to a server-side RESTful Grape API sitting on top of a Rails app which serves minimal HTML markup. The latter includes such things as a page title, along with links to JavaScript and stylesheet packages. A page loads, scripts run, data is fetched from the API. The result is merged into a HAMLJS template and rendered client-side.</p>

<p>Building this kind of one-page apps allows for clean separation between the presentation and API layers. The downside is that it will slow page render times - fetching data after page load means waiting for an AJAX request to complete before displaying anything.</p>

<p>There’re many solutions to this problem, all involving some kind of server-side rendering. You could, for example, share views and JavaScript between client and server. This would be a major paradigm shift for a large application like ours and not something we could possibly maneuver in a short amount of time.</p>

<p>Without changing the entire architecture of the system, how can we bootstrap JSON data server-side and avoid the data roundtrip on every page load?</p>


        <p><a href="/blog/2013/04/13/bootstrapping-json-data-with-rails-and-backbone-js/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/04/10/aranalytics/">
        
        
          <h2 class="entry-title">ARAnalytics - Analytics for iOS Apps</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/orta">Orta Therox<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/orta">@orta</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p>In both my <a href="http://orta.github.com">personal apps</a> and Artsy Folio, I’m always after a deeper understanding of how people use the app. There’s three ways to do this: ask users, watch users and track usage. I’d like to talk about the third of these.</p>

<p>We’ve experimented with quite a lot of analytics tools for the Artsy website, and it seemed fitting to do the same for our mobile app. We wanted the freedom to change the analytics tool without having to change the code, and so <a href="http://github.com/orta/ARAnalytics">ARAnalytics</a> was born.</p>


        <p><a href="/blog/2013/04/10/aranalytics/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/04/01/an-easter-egg-for-curl/">
        
        
          <h2 class="entry-title">An Easter Egg for Curl</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/db">Daniel Doubrovkine<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/dblockdotorg">@dblockdotorg</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p>Let’s implement an Easter egg that requires <a href="http://curl.haxx.se/">curl</a> and is HTTP-compliant.</p>

<p>We accept access tokens on our API endpoints. These can come from an <code class="language-plaintext highlighter-rouge">access_token</code> query string parameter.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl https://api.artsy.net/api/v1/system/up?access_token=invalid -v

&lt; HTTP/1.1 401 Unauthorized
&lt; Content-Type: application/json
&lt; Content-Length: 24

{ "error" : "Unauthorized" }
</code></pre></div></div>

<p>So far, so good. Now try this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl https://api.artsy.net/api/v1/system/up?access_token=10013 -v

&lt; HTTP/1.1 401 Broadway
&lt; Content-Type: application/json
&lt; Content-Length: 76

{ "error" : "Inspiration from the Engineering team at http://artsy.github.com" }
</code></pre></div></div>

<p>What?! <strong>401 Broadway</strong>? See, our office address is <em>401 Broadway, 10013, New York, NY</em>. We just tried to add a more developer-friendly way to find us in the New York grid. And here’s the view from our 25th floor office - that’s SOHO right below us and the Empire State Building a bit North.</p>

<p><img src="/images/2013-04-01-an-easter-egg-for-curl/artsy-office-view.jpg" /></p>

<p>Photo by <a href="https://github.com/zamiang">@zamiang</a>.</p>

<p>Easter egg implementation follows.</p>


        <p><a href="/blog/2013/04/01/an-easter-egg-for-curl/">Read on →</a></p>
    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  
    
      <article>
        <div class="article-container">

  
    <div class="meta-container">
      <header>
        
          <a href="/blog/2013/03/29/musical-chairs/">
        
        
          <h2 class="entry-title">Musical Chairs</h2>
        
        <time datetime=""></time>
          <p class="meta-author">


  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/orta">Orta Therox<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/orta">@orta</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
    
        <p>At Artsy we make Artsy Folio. Folio is an awesome portfolio app that shows our gallery and museum partners their artworks in one place, allows them to easily get information about their inventory and to send works by email to their contacts.</p>

<p>Folio has to deal with large multi-gigabyte syncs in order to operate offline. That makes for a great user experience, but for the developer working on the sync, it’s not as pleasant. Combined with our use of Core Data, the app’s maturity, and dealing with data store migrations, things can get hairy. We needed a tool that could freeze and restore app data at will, obviating the need for constant syncing and resyncing.</p>

<p>That’s why I built <a href="https://github.com/orta/chairs">chairs</a>…</p>

<!--more-->

<p>Chairs is a gem you can install via <code class="language-plaintext highlighter-rouge">gem install chairs</code>. It allows you to stash and replace your current iOS simulator application state. It will grab everything related to the app ( including the current <code class="language-plaintext highlighter-rouge">NSUserDefaults</code>) and store it in a named subfolder in your current working directory. No black magic, just lots of copying files.</p>

<p>The command line interface is based on git, so to bring in the current state you run <code class="language-plaintext highlighter-rouge">chairs pull [name]</code> and to replace the state you use <code class="language-plaintext highlighter-rouge">chairs push [name]</code>. The name is just a label so you can remember which version corresponds to that musical chair. You can get a list of these by doing <code class="language-plaintext highlighter-rouge">chairs list</code>, and delete them with <code class="language-plaintext highlighter-rouge">chairs rm [name]</code>.</p>

<p>Besides the core functionality, chairs has a little bit of sugar to help you with related tasks. My personal favourite is <code class="language-plaintext highlighter-rouge">chairs open</code>; this will just open the folder of the most recently used app so you can go and have a snoop around. Amazing for making sure files are where they say they are or for opening your sqlite database in <a href="http://menial.co.uk/base/">Base</a>.</p>

<p>So <code class="language-plaintext highlighter-rouge">gem install chairs</code> or check out the <a href="https://github.com/orta/chairs">README</a> for some more information.</p>

    

    
  </div>


  <footer>
  </footer>

</div>

      </article>
  

  <div class="pagination">
    <a href="/blog/archives">Blog Archives</a>
    <a href="/blog/categories">Categories</a>

    
      <a href="/blog/22/" class="previous">Previous</a>
    
    <span class="page_number ">Page: 23 of 27</span>

    
      <a href="/blog/24/" class="next">Older</a>
    
  </div>
</div>


    </div>
  </div>
  <footer id="main_footer"> <div class="footer-navigation">
  <ul>
    <li><a href="https://developers.artsy.net/">API</a></li>
    <li><a href="https://www.artsy.net/jobs">Careers</a></li>
    <li><a href="http://twitter.com/artsyopensource">@artsyopensource</a></li>
    <li><a href="http://www.artsy.net/">Artsy.net</a></li>
  </ul>
</div>



<script type="text/javascript">
      var disqus_shortname = 'artsy';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'https://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


</footer>
  <script type="text/javascript">
  $(function() {
    // TODO: Move this whole file to a javascript file that is included in the footer

    // Main sticky header
    if ($(window).width() >= 700) {
      var sticky = new Waypoint.Sticky({
        element: $("#banner"),
        offset: -100
      });
    }

    // Toggle hamburger menu
    $('.header-hamburger').click(function() {
      $('#banner, .cmn-toggle-switch').toggleClass('active');
      if (location.pathname == '/open-source') {
        $('.header-search span').hide();
        $('#page-sidebar').toggle();
      }
    });

    // Toggle search focus on mobile
    $('input.search').focus(function() {
      $('#header').addClass('search-focused');
    }).blur(function() {
      $('#header').removeClass('search-focused');
    });
  });
</script>

</body>
</html>
